<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>JavaScript unit test file</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <script src="../assets/jsunittest.js" type="text/javascript"></script>
  <script src="../../src/ext/prototype-1.6.0.3.js" type="text/javascript"></script>
  <script src="../../src/permutation.js" type="text/javascript"></script>
  
  <link rel="stylesheet" href="../assets/unittest.css" type="text/css" />
</head>
<body>

<div id="content">

  <div id="header">
    <h1>JavaScript unit test file</h1>
    <p>
      This file tests <strong>permutation.js</strong>.
    </p>
  </div>

  <!-- Log output (one per Runner, via {testLog: "testlog"} option)-->
  <div id="testlog"></div>
  
  <!-- Put sample/test html here -->
  <div id="sample"></div>
</div>

<script type="text/javascript">
// <![CDATA[

  var PERMS = $R(0, 4).map(function(i){ return new Permutation(i) });
  var PERMS_COLLECTIONS = ["", "a", "ab", "abc", "abcd"].map(function(c){ return Permutation.for_value(c) });
  var PERMS_EACH = $A([
    [[]],
    [[0]],
    [[0, 1], [1, 0]],
    [[0, 1, 2], [0, 2, 1], [1, 0, 2], [1, 2, 0], [2, 0, 1], [2, 1, 0]],
    [[0, 1, 2, 3], [0, 1, 3, 2], [0, 2, 1, 3], [0, 2, 3, 1],
      [0, 3, 1, 2], [0, 3, 2, 1], [1, 0, 2, 3], [1, 0, 3, 2],
      [1, 2, 0, 3], [1, 2, 3, 0], [1, 3, 0, 2], [1, 3, 2, 0],
      [2, 0, 1, 3], [2, 0, 3, 1], [2, 1, 0, 3], [2, 1, 3, 0],
      [2, 3, 0, 1], [2, 3, 1, 0], [3, 0, 1, 2], [3, 0, 2, 1],
      [3, 1, 0, 2], [3, 1, 2, 0], [3, 2, 0, 1], [3, 2, 1, 0]]
  ]);
  var NEXT_PRED = $A([
    [ [], [] ],
    [ [ 0 ], [ 0 ] ],
    [ [ 0, 1 ], [ 1, 0 ] ],
    [ [ 1, 0 ], [ 0, 1 ] ],
    [ [ 0, 1, 2 ], [ 0, 2, 1 ] ],
    [ [ 0, 2, 1 ], [ 1, 0, 2 ] ],
    [ [ 1, 0, 2 ], [ 1, 2, 0 ] ],
    [ [ 1, 2, 0 ], [ 2, 0, 1 ] ],
    [ [ 2, 0, 1 ], [ 2, 1, 0 ] ],
    [ [ 2, 1, 0 ], [ 0, 1, 2 ] ],
  ]);
  var PROJECTED = $A([
    [ "" ],
    [ "a" ],
    [ "ab", "ba", ],
    [ "abc", "acb", "bac", "bca", "cab", "cba" ],
    [ "abcd", "abdc", "acbd", "acdb", "adbc", "adcb", "bacd",
      "badc", "bcad", "bcda", "bdac", "bdca", "cabd", "cadb",
      "cbad", "cbda", "cdab", "cdba", "dabc", "dacb", "dbac",
      "dbca", "dcab", "dcba"]
  ]);
  var CYCLES = $A([
    [[]],
    [[]],
    [[], [[0, 1]]],
    [[], [[1, 2]], [[0, 1]], [[0, 1, 2]], [[0, 2, 1]], [[0, 2]]],
    [[], [[2, 3]], [[1, 2]], [[1, 2, 3]], [[1, 3, 2]], [[1, 3]],
      [[0, 1]], [[0, 1], [2, 3]], [[0, 1, 2]], [[0, 1, 2, 3]],
      [[0, 1, 3, 2]], [[0, 1, 3]], [[0, 2, 1]], [[0, 2, 3, 1]],
      [[0, 2]], [[0, 2, 3]], [[0, 2], [1, 3]], [[0, 2, 1, 3]],
      [[0, 3, 2, 1]], [[0, 3, 1]], [[0, 3, 2]], [[0, 3]],
      [[0, 3, 1, 2]], [[0, 3], [1, 2]]]
  ]);
  var SIGNUM = $A([
    [1],
    [1],
    [1, -1],
    [1, -1, -1, 1, 1, -1],
    [1, -1, -1, 1, 1, -1, -1, 1, 1, -1, -1, 1, 1, -1, -1, 1, 1, -1,
      -1, 1, 1, -1, -1, 1]
  ]);

new Test.Unit.Runner({
  // replace this with your real tests
  setup: function() {
    
  },
  
  teardown: function() {
    
  },
  
  testInvert: function() { with(this) {
    PERMS.each(function(perm){
      var id = perm;
      perm.each(function(p){
				assertEnumEqual(id.value(), (p.compose(p.invert())).value());
        assertEnumEqual(id, p.compose(p.invert()));
        assertEnumEqual(id.value(), p.compose(p.invert()).value());
      });
    });
  }},
	
	testCycles: function() { with(this) {
    PERMS.each(function(perm, i){
			console.log(CYCLES[i], ":::", perm.map(function(p){ return p.cycles()}));
			assertEnumEqual(CYCLES[i], perm.map(function(p){ return p.cycles() }));
    });
  }},
	
	testCompose: function() { with(this) {
    var too_big = new Permutation(10);
		PERMS.slice(0, 3).each(function(perm){
			var elements = perm.toArray();
			for(var i = 0; i < elements.length; i++){
				for(var j = 0; j < elements.length; j++){
					
				}
			}
		});
  }},
    
}, {testLog: "testlog"}); 
// For each Test.UnitRunner instance, specify the element id where results will be
// published; e.g. <div id="testlog"/> above.
// That is, you can have multiple "new Test.Unit.Runner() { ... }" on this page, just
// create more <div id="testlog2"></div> etc, and pass the element id to the hash above:
// e.g. {testLog: "testlog2"}
// ]]>
</script>
</body>
</html>